# æƒé™å’Œè§’è‰²é…ç½®æ€»ç»“

## æ¦‚è¿°

ç³»ç»Ÿå·²æˆåŠŸå®ç°é€šé…ç¬¦æƒé™æ¨¡å¼ï¼Œæ”¯æŒçµæ´»çš„æƒé™ç®¡ç†ã€‚å½“å‰é…ç½®åŒ…æ‹¬ï¼š

- âœ… **é€šé…ç¬¦æƒé™æ”¯æŒ**: æ”¯æŒ `*`ã€`module:*`ã€`*:action` ç­‰é€šé…ç¬¦æ¨¡å¼
- âœ… **å…·ä½“æƒé™**: ä¼ ç»Ÿçš„ `module:action` æ ¼å¼æƒé™
- âœ… **è§’è‰²æƒé™ç»„åˆ**: è§’è‰²å¯ä»¥åŒæ—¶æ‹¥æœ‰é€šé…ç¬¦æƒé™å’Œå…·ä½“æƒé™
- âœ… **ç³»ç»Ÿå†…ç½®è§’è‰²**: é¢„å®šä¹‰çš„ä¸šåŠ¡è§’è‰²é…ç½®

## å½“å‰æƒé™åˆ—è¡¨

### å…·ä½“æƒé™ (æŒ‰æ¨¡å—åˆ†ç±»)

#### ğŸ“ ç”¨æˆ·æ¨¡å— (user)

- `user:create` - åˆ›å»ºç”¨æˆ·
- `user:read` - æŸ¥çœ‹ç”¨æˆ·
- `user:update` - æ›´æ–°ç”¨æˆ·
- `user:delete` - åˆ é™¤ç”¨æˆ·
- `user:assign_role` - åˆ†é…è§’è‰²

#### ğŸ“ è§’è‰²æ¨¡å— (role)

- `role:create` - åˆ›å»ºè§’è‰²
- `role:read` - æŸ¥çœ‹è§’è‰²
- `role:update` - æ›´æ–°è§’è‰²
- `role:delete` - åˆ é™¤è§’è‰²
- `role:assign_permission` - åˆ†é…æƒé™

#### ğŸ“ å‰§æœ¬æ¨¡å— (script)

- `script:create` - åˆ›å»ºå‰§æœ¬
- `script:read` - æŸ¥çœ‹å‰§æœ¬
- `script:update` - æ›´æ–°å‰§æœ¬
- `script:delete` - åˆ é™¤å‰§æœ¬
- `script:assign` - åˆ†é…å‰§æœ¬

#### ğŸ“ éŸ³é¢‘æ¨¡å— (audio)

- `audio:upload` - ä¸Šä¼ éŸ³é¢‘
- `audio:download` - ä¸‹è½½éŸ³é¢‘
- `audio:delete` - åˆ é™¤éŸ³é¢‘
- `audio:review` - å®¡å¬éŸ³é¢‘

#### ğŸ“ å®¡å¬æ¨¡å— (review)

- `review:create` - åˆ›å»ºå®¡å¬
- `review:read` - æŸ¥çœ‹å®¡å¬
- `review:update` - æ›´æ–°å®¡å¬
- `review:approve` - å®¡æ‰¹é€šè¿‡
- `review:reject` - å®¡æ‰¹æ‹’ç»

#### ğŸ“ ç³»ç»Ÿæ¨¡å— (system)

- `system:config` - ç³»ç»Ÿé…ç½®
- `system:log` - æŸ¥çœ‹æ—¥å¿—
- `system:monitor` - ç³»ç»Ÿç›‘æ§

### é€šé…ç¬¦æƒé™æ¨¡å¼

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹é€šé…ç¬¦æƒé™æ ¼å¼ï¼š

1. **å…¨æƒé™**: `*` - æ‹¥æœ‰æ‰€æœ‰æƒé™
2. **æ¨¡å—é€šé…ç¬¦**: `module:*` - æ‹¥æœ‰æŒ‡å®šæ¨¡å—çš„æ‰€æœ‰æƒé™
   - ä¾‹å¦‚: `user:*`, `script:*`, `audio:*`
3. **æ“ä½œé€šé…ç¬¦**: `*:action` - æ‹¥æœ‰æ‰€æœ‰æ¨¡å—çš„æŒ‡å®šæ“ä½œæƒé™
   - ä¾‹å¦‚: `*:read`, `*:write`, `*:delete`

## å½“å‰è§’è‰²é…ç½®

### ğŸ”´ è¶…çº§ç®¡ç†å‘˜ (super_admin)

- **æƒé™**: `*` (å…¨æƒé™)
- **æè¿°**: ç³»ç»Ÿæœ€é«˜æƒé™ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸŸ  ç®¡ç†å‘˜ (admin)

- **é€šé…ç¬¦æƒé™**: `user:*`, `role:*`, `department:*`
- **å…·ä½“æƒé™**: `system:config`, `system:log`, `system:monitor`
- **æè¿°**: ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰å¤§éƒ¨åˆ†ç®¡ç†æƒé™
- **ç³»ç»Ÿè§’è‰²**: å¦

### ğŸŸ¡ é¡¹ç›®ç»„é•¿ (project_leader)

- **é€šé…ç¬¦æƒé™**: `script:*`, `audio:*`, `assignment:*`, `review:*`
- **å…·ä½“æƒé™**: `user:read`, `user:assign_role`, `department:read`
- **æè¿°**: é¡¹ç›®è´Ÿè´£äººï¼Œç®¡ç†é¡¹ç›®å…¨æµç¨‹
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸŸ¢ å¯¼æ¼” (director)

- **é€šé…ç¬¦æƒé™**: `audio:*`, `review:*`
- **å…·ä½“æƒé™**: `script:read`, `script:update`, `assignment:read`, `user:read`
- **æè¿°**: è‰ºæœ¯æŒ‡å¯¼å’Œè´¨é‡ç›‘ç£
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸ”µ åæœŸåˆ¶ä½œ (post_production)

- **é€šé…ç¬¦æƒé™**: `audio:*`
- **å…·ä½“æƒé™**: `script:read`, `assignment:read`, `user:read`
- **æè¿°**: éŸ³é¢‘å¤„ç†å’ŒæŠ€æœ¯åˆ¶ä½œ
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸŸ£ äºŒå®¡ (second_reviewer)

- **é€šé…ç¬¦æƒé™**: `review:*`
- **å…·ä½“æƒé™**: `audio:read`, `audio:download`, `audio:review`, `script:read`, `assignment:read`, `user:read`
- **æè¿°**: å†…å®¹è´¨é‡å®¡å¬å’Œæœ€ç»ˆå®¡æ‰¹
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸŸ¤ CVé…éŸ³æ¼”å‘˜ (cv)

- **å…·ä½“æƒé™**: `script:read`, `audio:create`, `audio:read`, `audio:upload`, `audio:download`, `assignment:read`, `user:read`
- **æè¿°**: è§’è‰²é…éŸ³å’ŒéŸ³é¢‘å½•åˆ¶
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### âš« ä¸€å®¡ (first_reviewer)

- **å…·ä½“æƒé™**: `audio:read`, `audio:download`, `audio:review`, `review:create`, `review:read`, `review:update`, `script:read`, `assignment:read`, `user:read`
- **æè¿°**: æŠ€æœ¯è´¨é‡å®¡å¬
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### ğŸŸ¨ ç¼–å‰§ (scriptwriter)

- **å…·ä½“æƒé™**: `script:create`, `script:read`, `script:update`, `script:export`, `user:read`
- **æè¿°**: å‰§æœ¬åˆ›ä½œå’Œå†…å®¹ç®¡ç†
- **ç³»ç»Ÿè§’è‰²**: æ˜¯

### âšª æ™®é€šç”¨æˆ· (user)

- **å…·ä½“æƒé™**: `user:read`, `script:read`, `audio:read`, `assignment:read`
- **æè¿°**: åŸºç¡€ç”¨æˆ·æƒé™
- **ç³»ç»Ÿè§’è‰²**: å¦

## æƒé™ç®¡ç†å·¥å…·

ç³»ç»Ÿæä¾›äº† `scripts/manage_permissions.py` è„šæœ¬ç”¨äºæƒé™å’Œè§’è‰²ç®¡ç†ï¼š

### ä¸»è¦åŠŸèƒ½

1. **æŸ¥çœ‹æƒé™**: `python manage_permissions.py list-permissions`
2. **æŸ¥çœ‹è§’è‰²**: `python manage_permissions.py list-roles`
3. **è§’è‰²è¯¦æƒ…**: `python manage_permissions.py show-role <è§’è‰²å>`
4. **æ·»åŠ æƒé™**: `python manage_permissions.py add-permission <å‚æ•°>`
5. **æ·»åŠ è§’è‰²**: `python manage_permissions.py add-role <å‚æ•°>`
6. **æ›´æ–°è§’è‰²**: `python manage_permissions.py update-role <è§’è‰²å> <æƒé™åˆ—è¡¨>`

### ä½¿ç”¨ç¤ºä¾‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æƒé™
python scripts/manage_permissions.py list-permissions

# åªæŸ¥çœ‹é€šé…ç¬¦æƒé™
python scripts/manage_permissions.py list-permissions --wildcard-only

# æŸ¥çœ‹è¶…çº§ç®¡ç†å‘˜è¯¦æƒ…
python scripts/manage_permissions.py show-role super_admin

# æ·»åŠ æ–°æƒé™
python scripts/manage_permissions.py add-permission "test:create" "åˆ›å»ºæµ‹è¯•" "åˆ›å»ºæµ‹è¯•æ•°æ®" "test" "write" "system"

# æ·»åŠ æ–°è§’è‰²
python scripts/manage_permissions.py add-role "tester" "æµ‹è¯•å‘˜" "ç³»ç»Ÿæµ‹è¯•äººå‘˜" "test:*,user:read"
```

## æŠ€æœ¯å®ç°

### æ•°æ®åº“è®¾è®¡

- æƒé™è¡¨å­˜å‚¨å…·ä½“æƒé™å®šä¹‰
- è§’è‰²è¡¨å­˜å‚¨è§’è‰²ä¿¡æ¯
- è§’è‰²æƒé™å…³è”é€šè¿‡æƒé™åç§°å­—ç¬¦ä¸²å®ç°
- æ”¯æŒé€šé…ç¬¦æƒé™çš„åŠ¨æ€è§£æ

### æƒé™éªŒè¯

- æ”¯æŒç²¾ç¡®åŒ¹é…å’Œé€šé…ç¬¦åŒ¹é…
- é€šé…ç¬¦æƒé™ä¼˜å…ˆçº§é«˜äºå…·ä½“æƒé™
- `*` æƒé™æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§

### æ‰©å±•æ€§

- æ˜“äºæ·»åŠ æ–°çš„æƒé™æ¨¡å—
- æ”¯æŒè‡ªå®šä¹‰é€šé…ç¬¦æ¨¡å¼
- çµæ´»çš„è§’è‰²æƒé™ç»„åˆ

## æ€»ç»“

âœ… **ä»»åŠ¡å®Œæˆ**: ç³»ç»Ÿå·²æˆåŠŸå®ç°é€šé…ç¬¦æƒé™æ¨¡å¼
âœ… **å†…ç½®æƒé™**: æ‰€æœ‰å¿…è¦çš„ç³»ç»Ÿæƒé™å·²æ·»åŠ 
âœ… **è§’è‰²é…ç½®**: ä¸šåŠ¡è§’è‰²å·²é…ç½®å®Œæˆ
âœ… **ç®¡ç†å·¥å…·**: æä¾›äº†å®Œæ•´çš„æƒé™ç®¡ç†è„šæœ¬
âœ… **æ–‡æ¡£å®Œæ•´**: æƒé™å’Œè§’è‰²é…ç½®å·²è¯¦ç»†è®°å½•

ç³»ç»Ÿç°åœ¨æ”¯æŒçµæ´»çš„æƒé™ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡é€šé…ç¬¦æƒé™ç®€åŒ–è§’è‰²é…ç½®ï¼ŒåŒæ—¶ä¿æŒç»†ç²’åº¦çš„æƒé™æ§åˆ¶èƒ½åŠ›ã€‚
